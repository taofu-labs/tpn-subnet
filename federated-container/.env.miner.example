# TPN Federated Network - Mining Pool Node Configuration
# Copy this file to .env and fill in your values

# ========================================
# === MANDATORY CONFIGURATION ===
# ========================================
# These settings MUST be configured for the mining pool to work properly
RUN_MODE=miner

# PostgreSQL Configuration (REQUIRED)
POSTGRES_PASSWORD=your_postgres_password_here

# Public Access Configuration (REQUIRED)
SERVER_PUBLIC_PROTOCOL=http
SERVER_PUBLIC_HOST=your_public_ip_here
SERVER_PUBLIC_PORT=3000

# GeoIP Services (REQUIRED for worker location verification)
MAXMIND_LICENSE_KEY=your_maxmind_license_key
IP2LOCATION_DOWNLOAD_TOKEN=your_ip2location_token

# Mining Pool Information (REQUIRED)
MINING_POOL_WEBSITE_URL=https://your-mining-pool.com
MINING_POOL_REWARDS="Detailed reward structure description, example: '10% fee to pool, 90% to workers paid out weekly'"

# Mining pool security (used to call /api/worker_performance)
ADMIN_API_KEY=

# ========================================
# === OPTIONAL CONFIGURATION ===
# ========================================
# These settings have sensible defaults but can be customized, if you do not know what they do, leave them as they are

# Shared Configuration
LOG_LEVEL=info # Valid values: error, warn, info, debug
POSTGRES_DB=postgres
POSTGRES_USER=postgres 

# Optional info
BROADCAST_MESSAGE="Optional broadcast message"
CONTACT_METHOD="email@example.com or telegram @username"

# SWAG SSL Configuration
SWAG_DOMAIN_NAME=your.domain.com
SWAG_EMAIL=admin@your.domain.com

# SWAG Advanced Configuration
TZ=UTC
SWAG_VALIDATION=http
SWAG_SUBDOMAINS=www
SWAG_ONLY_SUBDOMAINS=false
SWAG_EXTRA_DOMAINS=
SWAG_STAGING=false
SWAG_CERTPROVIDER=
SWAG_DNSPLUGIN=
SWAG_PROPAGATION=
SWAG_DISABLE_SSL=false

# Monitoring Configuration
WATCHTOWER_POLL_INTERVAL=3600
WATCHTOWER_NOTIFICATIONS=
WATCHTOWER_NOTIFICATION_URL=
AUTOHEAL_INTERVAL=5
AUTOHEAL_START_PERIOD=0
AUTOHEAL_DEFAULT_STOP_TIMEOUT=10

# Network Configuration
# Subnet edits must be synced in: .env (so the container knows), AND either in environment variables where docker compose is started OR in the values hardcoded in docker-compose.yml (so docker-compose.yml interpolation works)
TPN_INTERNAL_SUBNET=172.20.0.0/16
TPN_INTERNAL_GATEWAY=172.20.0.1
TPN_EXTERNAL_SUBNET=172.21.0.0/16
TPN_EXTERNAL_GATEWAY=172.21.0.1
